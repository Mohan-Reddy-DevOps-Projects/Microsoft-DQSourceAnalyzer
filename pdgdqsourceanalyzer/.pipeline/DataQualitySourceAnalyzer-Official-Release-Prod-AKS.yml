trigger: none
resources:
  repositories:
  - repository: templates
    type: git
    name: OneBranch.Pipelines/GovernedTemplates
    ref: refs/heads/main
  pipelines:
  - pipeline: _Data-Quality-Source-Analyzer-Main-Build
    trigger: none
    source: Data-Quality-Source-Analyzer-Main-Build
    project: Purview Data Governance
extends:
  template: v2/OneBranch.Official.CrossPlat.yml@templates
  parameters:
    stages:
    - stage: Prod_T0
      displayName: 'Prod: T0'
 #     dependsOn: []
      variables:
      - name: ob_release_environment
        value: Production
      jobs:
      - job: manualtrigger_t0
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless
        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu
    - stage: Prod_T0_EastUS2EUAP
      displayName: Prod:T0:EastUS2EUAP
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T0
      jobs:
      - job: eastus2euap_t0_deploy
        displayName: 'Deployment: Eastus2euap (Canary)'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Cnry.eus2.json
            ApprovalServiceEnvironment: Production
    - stage: Prod_T1
      displayName: 'Prod: T1'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: 
      - Prod_T0_EastUS2EUAP
      jobs:
      - job: agent_job
        displayName: Agent job
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
    - stage: Prod_T1_Approval_CentralUS
      displayName: 'Prod:T1 Approval CentralUS'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T1
      jobs:
      - job: manualtrigger_t1
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless
        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu
    - stage: Prod_T1_CentralUS
      displayName: 'Prod:T1:CentralUS'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T1_Approval_CentralUS
      jobs:
      - job: centralus_t1_deploy
        displayName: 'Deployment: Central US'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.cus.json
            ApprovalServiceEnvironment: Production
    - stage: Prod_T1_Approval_WestCentralUS
      displayName: 'Prod:T1 Approval WestCentralUS'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T1
      jobs:
      - job: manualtrigger_t1
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T1_WestCentralUS
      displayName: Prod:T1:WestCentralUS
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T1_Approval_WestCentralUS
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.wcus.json
            ApprovalServiceEnvironment: Production
    - stage: Prod_T2
      displayName: 'Prod: T2'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: 
      - Prod_T1_CentralUS
      - Prod_T1_WestCentralUS
      jobs:
      - job: agent_job
        displayName: Agent job
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build    
    - stage: Prod_T2_UKSouth
      displayName: Prod:T2:UKSouth
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T2
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.uks.json
            ApprovalServiceEnvironment: Production
    - stage: Prod_T3
      displayName: 'Prod: T3'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: 
      - Prod_T2_UKSouth
      jobs:
      - job: agent_job
        displayName: Agent job
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
    - stage: Prod_T3_EastUS
      displayName: Prod:T3:EastUS
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T3
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.eus.json
            ApprovalServiceEnvironment: Production
    - stage: Prod_T4
      displayName: 'Prod: T4'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: 
      - Prod_T3_EastUS
      jobs:
      - job: agent_job
        displayName: Agent job
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
    - stage: Prod_T4_Approval_WestUS
      displayName: 'Prod:T4 Approval WestUS'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4
      jobs:
      - job: manualtrigger_t4
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T4_WestUS
      displayName: Prod:T4:WestUS
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4_Approval_WestUS
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.wus.json
            ApprovalServiceEnvironment: Production
    - stage: Prod_T4_Approval_BrazilSouth
      displayName: 'Prod:T4 Approval BrazilSouth'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4
      jobs:
      - job: manualtrigger_t4
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T4_BrazilSouth
      displayName: Prod:T4:BrazilSouth
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4_Approval_BrazilSouth
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.brs.json
            ApprovalServiceEnvironment: Production
    - stage: Prod_T4_Approval_JapanEast
      displayName: 'Prod:T4 Approval JapanEast'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4
      jobs:
      - job: manualtrigger_t4
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T4_JapanEast
      displayName: Prod:T4:JapanEast
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4_Approval_JapanEast
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.jpe.json
            ApprovalServiceEnvironment: Production
    - stage: Prod_T4_Approval_CentralIndia
      displayName: 'Prod:T4 Approval CentralIndia'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4
      jobs:
      - job: manualtrigger_t4
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T4_CentralIndia
      displayName: Prod:T4:CentralIndia
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4_Approval_CentralIndia
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.cid.json
            ApprovalServiceEnvironment: Production    
    - stage: Prod_T4_Approval_NorthEurope
      displayName: 'Prod:T4 Approval NorthEurope'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4
      jobs:
      - job: manualtrigger_t4
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T4_NorthEurope
      displayName: Prod:T4:NorthEurope
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4_Approval_NorthEurope
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.ne.json
            ApprovalServiceEnvironment: Production
    - stage: Prod_T4_Approval_AustraliaEast
      displayName: 'Prod:T4 Approval AustraliaEast'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4
      jobs:
      - job: manualtrigger_t4
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T4_AustraliaEast
      displayName: Prod:T4:AustraliaEast
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4_Approval_AustraliaEast
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.ae.json
            ApprovalServiceEnvironment: Production

    - stage: Prod_T4_Approval_WestUS2
      displayName: 'Prod:T4 Approval WestUS2'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4
      jobs:
      - job: manualtrigger_t4
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T4_WestUS2
      displayName: Prod:T4:WestUS2
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4_Approval_WestUS2
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.wus2.json
            ApprovalServiceEnvironment: Production
    - stage: Prod_T4_Approval_SouthEastAsia
      displayName: 'Prod:T4 Approval SouthEastAsia'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4
      jobs:
      - job: manualtrigger_t4
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T4_SouthEastAsia
      displayName: Prod:T4:SouthEastAsia
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4_Approval_SouthEastAsia
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.sea.json
            ApprovalServiceEnvironment: Production
    - stage: Prod_T4_Approval_CanadaCentral
      displayName: 'Prod:T4 Approval CanadaCentral'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4
      jobs:
      - job: manualtrigger_t4
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T4_CanadaCentral
      displayName: Prod:T4:CanadaCentral
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4_Approval_CanadaCentral
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.cc.json
            ApprovalServiceEnvironment: Production
    - stage: Prod_T4_Approval_EastUS2
      displayName: 'Prod:T4 Approval EastUS2'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4
      jobs:
      - job: manualtrigger_t4
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T4_EastUS2
      displayName: Prod:T4:EastUS2
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4_Approval_EastUS2
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.eus2.json
            ApprovalServiceEnvironment: Production
    - stage: Prod_T4_Approval_WestEurope
      displayName: 'Prod:T4 Approval WestEurope'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4
      jobs:
      - job: manualtrigger_t4
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T4_WestEurope
      displayName: Prod:T4:WestEurope
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4_Approval_WestEurope
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.weu.json
            ApprovalServiceEnvironment: Production
    - stage: Prod_T4_Approval_SouthCentralUS
      displayName: 'Prod:T4 Approval SouthCentralUS'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4
      jobs:
      - job: manualtrigger_t4
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T4_SouthCentralUS
      displayName: Prod:T4:SouthCentralUS
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4_Approval_SouthCentralUS
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.scus.json
            ApprovalServiceEnvironment: Production
    - stage: Prod_T4_Approval_FranceCentral
      displayName: 'Prod:T4 Approval FranceCentral'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4
      jobs:
      - job: manualtrigger_t4
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T4_FranceCentral
      displayName: Prod:T4:FranceCentral
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4_Approval_FranceCentral
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.fc.json
            ApprovalServiceEnvironment: Production
    - stage: Prod_T4_Approval_UAENorth
      displayName: 'Prod:T4 Approval UAENorth'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4
      jobs:
      - job: manualtrigger_t4
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T4_UAENorth
      displayName: Prod:T4:UAENorth
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T4_Approval_UAENorth
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.uaen.json
            ApprovalServiceEnvironment: Production
# SouthAfricaNorth
    - stage: Prod_T5
      displayName: 'Prod: T5'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: 
      - Prod_T4_UAENorth
      jobs:
      - job: agent_job
        displayName: Agent job
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
    - stage: Prod_T5_Approval_SouthAfricaNorth
      displayName: 'Prod:T5 Approval SouthAfricaNorth'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T5
      jobs:
      - job: manualtrigger_t5
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T5_SouthAfricaNorth
      displayName: Prod:T5:SouthAfricaNorth
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T5_Approval_SouthAfricaNorth
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.san.json
            ApprovalServiceEnvironment: Production
# GermanyWestCentral
    - stage: Prod_T5_Approval_GermanyWestCentral
      displayName: 'Prod:T5 Approval GermanyWestCentral'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T5
      jobs:
      - job: manualtrigger_t5
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T5_GermanyWestCentral
      displayName: Prod:T5:GermanyWestCentral
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T5_Approval_GermanyWestCentral
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.dewc.json
            ApprovalServiceEnvironment: Production
# KoreaCentral
    - stage: Prod_T5_Approval_KoreaCentral
      displayName: 'Prod:T5 Approval KoreaCentral'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T5
      jobs:
      - job: manualtrigger_t5
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T5_KoreaCentral
      displayName: Prod:T5:KoreaCentral
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T5_Approval_KoreaCentral
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.kc.json
            ApprovalServiceEnvironment: Production
# Switzerland North
    - stage: Prod_T5_Approval_SwitzerlandNorth
      displayName: 'Prod:T5 Approval SwitzerlandNorth'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T5
      jobs:
      - job: manualtrigger_t5
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T5_SwitzerlandNorth
      displayName: Prod:T5:SwitzerlandNorth
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T5_Approval_SwitzerlandNorth
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.stzn.json
            ApprovalServiceEnvironment: Production
# Canada East
    - stage: Prod_T5_Approval_CanadaEast
      displayName: 'Prod:T5 Approval CanadaEast'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T5
      jobs:
      - job: manualtrigger_t5
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T5_CanadaEast
      displayName: Prod:T5:CanadaEast
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T5_Approval_CanadaEast
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.cae.json
            ApprovalServiceEnvironment: Production
# SwedenCentral
    - stage: Prod_T5_Approval_SwedenCentral
      displayName: 'Prod:T5 Approval SwedenCentral'
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T5
      jobs:
      - job: manualtrigger_t5
        displayName: 'Production Approval Manual Trigger'
        timeoutInMinutes: 7200
        pool:
          type: agentless        
        steps:
        - task: ManualValidation@0
          timeoutInMinutes: 7200
          inputs:
            notifyUsers:
              redmond\crg-appurviewdat-bax4-approver-mcsu 
    - stage: Prod_T5_SwedenCentral
      displayName: Prod:T5:SwedenCentral
      variables:
      - name: ob_release_environment
        value: Production
      dependsOn: Prod_T5_Approval_SwedenCentral
      jobs:
      - job: agent_job
        displayName: 'Agent job'
        pool:
          type: release
        steps:
        - download: _Data-Quality-Source-Analyzer-Main-Build
        - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
          inputs:
            UseServerMonitorTask: true
            EnableStrictValidation: false
            ValidateOnly: false
            EndpointProviderType: ApprovalService
            ServiceRootLocation: LinkedArtifact
            RolloutSpecType: RSPath
            ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
            RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.sc.json
            ApprovalServiceEnvironment: Production
# NorwayEast
    # - stage: Prod_T5_Approval_NorwayEast
    #   displayName: 'Prod:T5 Approval NorwayEast'
    #   variables:
    #   - name: ob_release_environment
    #     value: Production
    #   dependsOn: Prod_T5
    #   jobs:
    #   - job: manualtrigger_t5
    #     displayName: 'Production Approval Manual Trigger'
    #     timeoutInMinutes: 7200
    #     pool:
    #       type: agentless        
    #     steps:
    #     - task: ManualValidation@0
    #       timeoutInMinutes: 7200
    #       inputs:
    #         notifyUsers:
    #           redmond\crg-appurviewdat-bax4-approver-mcsu 
    # - stage: Prod_T5_NorwayEast
    #   displayName: Prod:T5:NorwayEast
    #   variables:
    #   - name: ob_release_environment
    #     value: Production
    #   dependsOn: Prod_T5_Approval_NorwayEast
    #   jobs:
    #   - job: agent_job
    #     displayName: 'Agent job'
    #     pool:
    #       type: release
    #     steps:
    #     - download: _Data-Quality-Source-Analyzer-Main-Build
    #     - task: vsrm-ev2.vss-services-ev2.adm-release-task.ExpressV2Internal@1
    #       inputs:
    #         UseServerMonitorTask: true
    #         EnableStrictValidation: false
    #         ValidateOnly: false
    #         EndpointProviderType: ApprovalService
    #         ServiceRootLocation: LinkedArtifact
    #         RolloutSpecType: RSPath
    #         ServiceRootPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot
    #         RolloutSpecPath: $(Pipeline.Workspace)/_Data-Quality-Source-Analyzer-Main-Build/drop_linux_build_stage_linux_job/PdgDqsourceAnalyzer/ServiceGroupRoot/RolloutSpecs/generated/RolloutSpec.AKS.Purview.DQS.Prod.noe.json
    #         ApprovalServiceEnvironment: Production